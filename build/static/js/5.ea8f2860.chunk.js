(this["webpackJsonpweb-erp"]=this["webpackJsonpweb-erp"]||[]).push([[5],{103:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(15),r=a(218),o=a(212),i=a(57),c=a(2),s=Object(i.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function d(e){var t=e.open,a=e.setOpen,i=e.autoHideDuration,d=void 0===i?4e3:i,l=e.severity,u=void 0===l?"success":l,p=e.message,b=s();function f(e){return Object(c.jsx)(o.a,Object(n.a)({elevation:6,variant:"filled"},e))}var j=function(e,n){"clickaway"!==n&&a(!t)};return Object(c.jsx)("div",{className:b.root,children:Object(c.jsx)(r.a,{open:t,autoHideDuration:d,onClose:j,children:Object(c.jsx)(f,{onClose:j,severity:u,children:p})})})}},117:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(){return window.innerWidth<800?window.innerWidth-5:.8*window.innerWidth}},118:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return u}));var n=a(96),r=a.n(n),o=a(97),i=a(98);function c(e){return s.apply(this,arguments)}function s(){return(s=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(i.b,"stage/order/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t,a,n){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(r.a.mark((function e(t,a,n,o){var c,s,d,l,u=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=u.length>4&&void 0!==u[4]?u[4]:null,s=u.length>5&&void 0!==u[5]?u[5]:null,d=u.length>6&&void 0!==u[6]&&u[6],e.next=5,fetch("".concat(i.b,"stage/pathStageSituation"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({OrdemId:t,ProcessoId:a,ProdutoId:n,Status:o,MotivoParadaId:c,QuantidadeProduzida:s,IsInspecao:d})});case 5:if(201!=(l=e.sent).status){e.next=10;break}return e.abrupt("return",l.json());case 10:return e.t0=Error,e.next=13,l.json();case 13:throw e.t1=e.sent.message,new e.t0(e.t1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(i.b,"stage/getPossibleStageSituation"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:if(200!=(t=e.sent).status){e.next=7;break}return e.abrupt("return",t.json());case 7:return e.t0=Error,e.next=10,t.json();case 10:throw e.t1=e.sent.message,new e.t0(e.t1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},156:function(e,t,a){},210:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return G}));var n=a(136),r=a(96),o=a.n(r),i=a(15),c=a(97),s=a(105),d=a(203),l=(a(156),a(0)),u=a.n(l),p=a(118),b=a(103),f=a(4),j=a(128),m=a(117),h=a(42),O=a(98),v=a(44),x=a(1),g=a(3),w=a(18),y=(a(9),a(17)),k=a(22),S=a(38),P=a(216),E=a(72),C=a(73),I=a(19),W=a(188),N={enter:I.b.enteringScreen,exit:I.b.leavingScreen},T=l.forwardRef((function(e,t){var a=e.BackdropProps,n=e.children,r=e.classes,o=e.className,i=e.disableBackdropClick,c=void 0!==i&&i,s=e.disableEscapeKeyDown,d=void 0!==s&&s,u=e.fullScreen,p=void 0!==u&&u,b=e.fullWidth,f=void 0!==b&&b,j=e.maxWidth,m=void 0===j?"sm":j,h=e.onBackdropClick,O=e.onClose,v=e.onEnter,w=e.onEntered,k=e.onEntering,I=e.onEscapeKeyDown,T=e.onExit,D=e.onExited,F=e.onExiting,B=e.open,M=e.PaperComponent,z=void 0===M?W.a:M,R=e.PaperProps,A=void 0===R?{}:R,Q=e.scroll,q=void 0===Q?"paper":Q,K=e.TransitionComponent,$=void 0===K?C.a:K,H=e.transitionDuration,J=void 0===H?N:H,Y=e.TransitionProps,L=e["aria-describedby"],X=e["aria-labelledby"],G=Object(g.a)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),U=l.useRef();return l.createElement(P.a,Object(x.a)({className:Object(y.a)(r.root,o),BackdropComponent:E.a,BackdropProps:Object(x.a)({transitionDuration:J},a),closeAfterTransition:!0,disableBackdropClick:c,disableEscapeKeyDown:d,onEscapeKeyDown:I,onClose:O,open:B,ref:t},G),l.createElement($,Object(x.a)({appear:!0,in:B,timeout:J,onEnter:v,onEntering:k,onEntered:w,onExit:T,onExiting:F,onExited:D,role:"none presentation"},Y),l.createElement("div",{className:Object(y.a)(r.container,r["scroll".concat(Object(S.a)(q))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===U.current&&(U.current=null,h&&h(e),!c&&O&&O(e,"backdropClick"))},onMouseDown:function(e){U.current=e.target}},l.createElement(z,Object(x.a)({elevation:24,role:"dialog","aria-describedby":L,"aria-labelledby":X},A,{className:Object(y.a)(r.paper,r["paperScroll".concat(Object(S.a)(q))],r["paperWidth".concat(Object(S.a)(String(m)))],A.className,p&&r.paperFullScreen,f&&r.paperFullWidth)}),n))))})),D=Object(k.a)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":Object(w.a)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":Object(w.a)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":Object(w.a)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":Object(w.a)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":Object(w.a)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(T),F=l.forwardRef((function(e,t){var a=e.disableSpacing,n=void 0!==a&&a,r=e.classes,o=e.className,i=Object(g.a)(e,["disableSpacing","classes","className"]);return l.createElement("div",Object(x.a)({className:Object(y.a)(r.root,o,!n&&r.spacing),ref:t},i))})),B=Object(k.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(F),M=l.forwardRef((function(e,t){var a=e.classes,n=e.className,r=e.dividers,o=void 0!==r&&r,i=Object(g.a)(e,["classes","className","dividers"]);return l.createElement("div",Object(x.a)({className:Object(y.a)(a.root,n,o&&a.dividers),ref:t},i))})),z=Object(k.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(M),R=a(201),A=l.forwardRef((function(e,t){return l.createElement(R.a,Object(x.a)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))})),Q=Object(k.a)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(A),q=l.forwardRef((function(e,t){var a=e.children,n=e.classes,r=e.className,o=e.disableTypography,i=void 0!==o&&o,c=Object(g.a)(e,["children","classes","className","disableTypography"]);return l.createElement("div",Object(x.a)({className:Object(y.a)(n.root,r),ref:t},c),i?a:l.createElement(R.a,{component:"h2",variant:"h6"},a))})),K=Object(k.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(q),$=a(57),H=a(222),J=a(220),Y=a(211),L=a(2);Object($.a)((function(e){return{formControl:{marginTop:e.spacing(2)},selectEmpty:{marginTop:e.spacing(2)}}}));function X(e){var t=e.open,a=e.title,n=e.message,r=e.action,o=e.setOpen,c=e.askReason,p=e.labelReason,b=void 0===p?"Motivo":p,f=e.askQntProduction,j=e.labelQntProduction,m=void 0===j?"Quantidade produzida na etapa":j,h=Object(l.useState)(""),O=Object(s.a)(h,2),x=O[0],g=O[1],w=u.a.useState({age:"",name:"hai",quantidadeProduzida:0}),y=Object(s.a)(w,2),k=y[0],S=y[1],P=function(){o(!t)};return Object(L.jsxs)(D,{open:t,onClose:P,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(L.jsx)(K,{id:"alert-dialog-title",children:a}),Object(L.jsxs)("form",{onSubmit:function(){c?r(k.age):f?r(x):r(),o(!t)},children:[Object(L.jsxs)(z,{children:[Object(L.jsx)(Q,{id:"alert-dialog-description",children:n}),c&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(H.a,{htmlFor:"age-native-simple",children:[b,":"]}),Object(L.jsxs)(Y.a,{native:!0,value:k.age,onChange:function(e){var t=e.target.name;S(Object(i.a)(Object(i.a)({},k),{},Object(v.a)({},t,e.target.value)))},inputProps:{name:"age",id:"age-native-simple"},fullWidth:!0,required:!0,children:[Object(L.jsx)("option",{"aria-label":"None",value:""}),JSON.parse(localStorage.getItem("situations")).map((function(e){return Object(L.jsx)("option",{value:e.id,children:e.value})}))]})]}),f&&Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(J.a,{className:"line",id:"standard-basic",label:m,required:!0,inputProps:{name:"quantidadeProduzida"},type:"number",value:x,onChange:function(e){return g(e.target.value)},fullWidth:!0})})]}),Object(L.jsxs)(B,{children:[Object(L.jsx)(d.a,{onClick:P,color:"primary",children:"N\xe3o"}),Object(L.jsx)(d.a,{color:"primary",autoFocus:!0,type:"submit",children:"Sim"})]})]})]})}function G(e){var t=Object(m.a)(),a=Object(l.useState)(!1),r=Object(s.a)(a,2),u=r[0],v=r[1],x=Object(l.useState)([]),g=Object(s.a)(x,2),w=g[0],y=g[1],k=Object(l.useState)(!1),S=Object(s.a)(k,2),P=S[0],E=S[1],C=Object(l.useState)(!1),I=Object(s.a)(C,2),W=I[0],N=I[1],T=Object(l.useState)(!1),D=Object(s.a)(T,2),F=D[0],B=D[1],M=Object(l.useState)(!1),z=Object(s.a)(M,2),R=z[0],A=z[1],Q=Object(l.useState)(!1),q=Object(s.a)(Q,2),K=q[0],$=q[1],H=Object(l.useState)(),J=Object(s.a)(H,2),Y=J[0],G=J[1],U=Object(l.useState)(Object(L.jsx)(L.Fragment,{})),V=Object(s.a)(U,2),Z=V[0],_=V[1],ee=Object(l.useState)(""),te=Object(s.a)(ee,2),ae=(te[0],te[1],Object(f.g)()),ne=e.location.state.idOrder,re=e.location.state.situacao,oe=[{field:"id",hide:!0},{field:"ordem",headerName:"Ordem",width:.175*t},{field:"processo",headerName:"Processo",width:.5*t},{field:"situacao",headerName:"Situa\xe7\xe3o",width:.25*t}];function ie(){return(ie=Object(c.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,Object(p.b)(t);case 3:a=e.sent,E(!1),n=a.data.row.map((function(e){return{id:e.ProcessoId.value,ordem:e.OrdemProcessoId.value,processo:e.ProcessoId.resolved,situacao:e.Status.resolved,metadata:Object(i.a)({},e)}})),y(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(Object(L.jsx)(X,{open:!0,setOpen:_,title:"Iniciar etapa",message:"Deseja iniciar o processo: ".concat(Y.metadata.ProcessoId.resolved,"?"),action:Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,Object(p.c)(ne,Y.metadata.ProcessoId.value,Y.metadata.ProdutoId.value,O.a.started.id).then((function(e){console.log(e),w.forEach((function(t,a){t.id!=Y.metadata.ProcessoId.value||(w[a]=Object(i.a)(Object(i.a)({},t),{},{situacao:e.Field.Status.resolved,metadata:Object(i.a)({},e.Field)}))})),y(Object(n.a)(w)),E(!1),be("Etapa iniciada","success")})).catch((function(e){E(!1),be(e.message,"error")}));case 3:case"end":return e.stop()}}),e)})))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(Object(L.jsx)(X,{open:!0,setOpen:_,title:"Pausar etapa",message:"Deseja interromper o processo: ".concat(Y.metadata.ProcessoId.resolved,"?"),askReason:!0,action:function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),E(!0),e.next=4,Object(p.c)(ne,Y.metadata.ProcessoId.value,Y.metadata.ProdutoId.value,O.a.paused.id,t).then((function(e){console.log(e),w.forEach((function(t,a){t.id!=Y.metadata.ProcessoId.value||(w[a]=Object(i.a)(Object(i.a)({},t),{},{situacao:e.Field.Status.resolved,metadata:Object(i.a)({},e.Field)}))})),y(Object(n.a)(w)),E(!1),be("Etapa pausada","success")})).catch((function(e){E(!1),be(e.message,"error")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(Object(L.jsx)(X,{open:!0,setOpen:_,title:"Finalizar etapa",message:"Deseja finalizar o processo: ".concat(Y.metadata.ProcessoId.resolved,"?"),askQntProduction:!0,action:function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),console.log(t),e.next=4,Object(p.c)(ne,Y.metadata.ProcessoId.value,Y.metadata.ProdutoId.value,O.a.finished.id,null,t).then((function(e){console.log(e),w.forEach((function(t,a){t.id!=Y.metadata.ProcessoId.value||(w[a]=Object(i.a)(Object(i.a)({},t),{},{situacao:e.Field.Status.resolved,metadata:Object(i.a)({},e.Field)}))})),y(Object(n.a)(w)),E(!1),be("Etapa finalizada","success")})).catch((function(e){E(!1),be(e.message,"error")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(Object(L.jsx)(X,{open:!0,setOpen:_,title:"Inspecionar qualidade",message:"Deseja inspecionar a qualidade da ordem: ".concat(Y.metadata.OrdemId.resolved,"?"),labelQntProduction:"Quantidade de produtos com qualidade aprovada",askQntProduction:!0,action:function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),console.log(t),e.next=4,Object(p.c)(ne,Y.metadata.ProcessoId.value,Y.metadata.ProdutoId.value,O.a.finished.id,null,t,!0).then((function(e){console.log(e),w.forEach((function(t,a){t.id!=Y.metadata.ProcessoId.value||(w[a]=Object(i.a)(Object(i.a)({},t),{},{situacao:e.Field.Status.resolved,metadata:Object(i.a)({},e.Field)}))})),y(Object(n.a)(w)),E(!1),be("Ordem inspecionada","success")})).catch((function(e){E(!1),be(e.message,"error")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),G(t.row);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return(pe=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y&&re.value!=O.a.finished.id?(t=Y.metadata.Status.value,N(t==(O.a.paused.id||t==O.a.freeToStart.id||Y.id==O.a.inspect.id)&&t==O.a.started.id),B(t==O.a.started.id&&!Y.id==O.a.inspect.id),A((t!=O.a.paused.id||t==O.a.finished.id)&&t!=O.a.freeToStart.id&&Y.id!=O.a.inspect.id),$(Y.id==O.a.inspect.id&&t==O.a.started.id)):(N(!1),A(!1),B(!1),$(!1));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t){v(Object(L.jsx)(b.a,{open:!0,setOpen:v,severity:t,message:e}))}return Object(l.useEffect)((function(){console.log(ne),ne?function(e){ie.apply(this,arguments)}(ne):ae.push("/")}),[]),Object(l.useEffect)((function(){!function(){pe.apply(this,arguments)}()}),[Y]),Object(L.jsxs)(L.Fragment,{children:[u,P&&Object(L.jsx)(h.a,{}),Z,Object(L.jsxs)("div",{className:"container",children:[Object(L.jsxs)("div",{className:"lineAction",children:[Object(L.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){return function(){return ce.apply(this,arguments)}()},disabled:!W,children:"Iniciar Etapa"}),Object(L.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){return function(){return se.apply(this,arguments)}()},disabled:!F,children:"Interromper"}),Object(L.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){return function(){return de.apply(this,arguments)}()},disabled:!R,children:"Finalizar"}),Object(L.jsx)(d.a,{variant:"contained",color:"primary",onClick:function(){return function(){return le.apply(this,arguments)}()},disabled:!K,children:"Inspecionar"})]}),Object(L.jsx)("div",{className:"containerTable",children:Object(L.jsx)(j.a,{rows:w,columns:oe,pageSize:10,onCellClick:function(e){return function(e){return ue.apply(this,arguments)}(e)}})})]})]})}},98:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n="https://mysterious-forest-14010.herokuapp.com/",r={started:{id:30,value:"Iniciado"},paused:{id:60,value:"Pausado"},finished:{id:40,value:"Finalizado"},freeToStart:{id:20,value:"Liberado para iniciar"},inspect:{id:180,value:"Inspe\xe7\xe3o"}}}}]);
//# sourceMappingURL=5.ea8f2860.chunk.js.map